#!/usr/bin/perl
## create the file public_html/bases/sys/css_classes from the css of public_html/themes/standard
## use in documentation
use warnings;
use strict;
#use Text::Balanced qw (extract_bracketed extract_tagged);

$/ = undef;

my $dir="public_html/themes/standard";
my $outfile="public_html/bases/sys/css_classes" ;
my $TEXT="generated by bin/css.pl - do not change by hand \n" ; 
for (glob("$dir/*.css")) {
  $TEXT  .= "\n\n\n/*generated from file : $_ */\n" ;
  open(IN, $_) ; 
  my $text = <IN>; close(IN);
  $text =~ s/\n\t+//g ;
  $text =~ s/\n}/}/g ;
  $text =~ s/{[^{]+}/{ }/g ;
  $text =~ s/{ }(.)/{ }\n$1/g ;
  $TEXT .= "\n$text" ; 
}

out($outfile, $TEXT) ;


sub out { my ($bloc, $text) = @_;
  open  (OUT, ">$bloc") ;
  print OUT $text ; close OUT;
}