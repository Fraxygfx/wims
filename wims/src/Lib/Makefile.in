# @configure_input@

wims_home=../..
cc=@CC@
cflags=@CFLAGS@ -Wall
LDFLAGS=@LDFLAGS@
CPPFLAGS=@CPPFLAGS@

ranlib=@RANLIB@
defines=@DEFINES@
SETENV_OBJS=@SETENV_OBJS@

all: libwims.a

static: libwims.a

%.o: %.c
	$(cc) -o $@ $(cflags) $(defines) -c $<

libwims.o: *.c libwims.h
	$(cc) -o $@ $(cflags) $(CPPFLAGS) $(defines) -Dlibwims -c libwims.c

libwims.a: libwims.o $(SETENV_OBJS)
	ar rc $@ libwims.o $(SETENV_OBJS)
	$(ranlib) $@
	cp $@ $(wims_home)/lib

clean::
	rm -f libwims.so libwims.a *.o 2>/dev/null

distclean::
	rm -f libwims.so libwims.a libwims.o 2>/dev/null
	rm -f Makefile
	cd $(wims_home)/lib; rm -f libwims* 2>/dev/null


