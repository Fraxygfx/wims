CC=@CC@
CFLAGS=@CFLAGS@ @CFLAGS_GMP@
CXX = g++
CXXFLAGS= -g @CFLAGS_GMP@
RECODE_SUPPORT =
LIBS= -lm @LIBS_GMP@ -lgmp -lgmpxx

all : units-filter

test : all
	sh units-test

units-filter : unitesparser.o
	${CXX} $(CXXFLAGS) $(LIBS) -o units-filter unitesparser.o

unitesparser.o : uniteslex.cc unitesparser.cc
	${CXX} $(CXXFLAGS) -c $(RECODE_SUPPORT) unitesparser.cc 

uniteslex.cc : unites.l unites.y unites.h
	flex  -ouniteslex.cc unites.l

unitesparser.cc: unites.y
	bison  --verbose -o unitesparser.cc unites.y

clean :
	rm -f *~ uniteslex.cc unitesparser.cc *.o  *.output units-filter
