# @configure_input@

wims_home=../../..
cc=@CC@
cflags=@CFLAGS@ -Wall
LDFLAGS=@LDFLAGS@
CPPFLAGS=@CPPFLAGS@

defines=@DEFINES@
rpath=@RPATH@
STRIP=@STRIP@
lopt=-L$(wims_home)/lib -lwims -lm $(rpath)

symobjects=compile.o match.o suffix.o translate.o symtext.o

%.o: %.c *.h
	$(cc) -o $@ $(cflags) $(defines) -c $<

all:: symtext

clean::
	rm -f *.o symtext

distclean:
	rm -f *.o symtext
	cd $(wims_home)/public_html/bin; rm -f symtext 2>/dev/null; cd ../../src/Misc/symtext
	rm -f Makefile

symtext: $(symobjects)
	$(cc) $(cflags) $(CPPFLAGS) $(LDFLAGS) $(lopt) $(symobjects) -o symtext
	./symtext -t
	$(STRIP) $@
	cp $@ $(wims_home)/public_html/bin


