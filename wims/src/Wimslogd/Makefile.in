# @configure_input@

wims_home=../..
cc=@CC@
cflags=@CFLAGS@ -Wall
LDFLAGS=@LDFLAGS@
CPPFLAGS=@CPPFLAGS@

defines=@DEFINES@
STRIP=@STRIP@
lopt=-L../../lib -lwims -lm

all: wimslogd

clean:
	rm -f wimslogd

distclean:
	make clean
	rm -f $(wims_home)/bin/wimslogd
	rm -f Makefile

wimslogd: *.c *.h ../wimsdef.h ../Lib/libwims.h
	$(cc) $(cflags) $(CPPFLAGS) $(LDFLAGS) $(defines) wimslogd.c $(lopt) -o wimslogd
	$(STRIP) wimslogd
	rm -f $(wims_home)/tmp/log/wimslogd.pid $(wims_home)/sessions/.wimslogd
	cp wimslogd $(wims_home)/tmp/log/wimslogd.new
