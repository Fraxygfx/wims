!nocache
!if $error!=$empty
 !read docu/$en/msg.phtml
 <p>
 !exit
!endif

<center><h1>$tit</h1></center>

!if $titb=$empty
 <p>
 The block <tt>$block</tt> is not yet created.
 <p>
 !exit
!endif

!if $datetest<0
 <p>
 This page is not yet open to reading. Come back later!
 <p>
 !exit
!endif

!if $datetest>0
 <p>
 This page is expired. You can no longer read it. Sorry!
 <p>
 !exit
!endif

:newblock
<a name=$block>
<h3>$titb</h3>

!read $docdir/$doc/$block.def content

!if $waitblock$(waitblock_$block)!=$empty
 !set waitblock=$(waitblock_$block),$waitblock
 !set waitblock=!nonempty items $waitblock
 !set block=!item 1 of $waitblock
 !set gotblock=!append item $block to $gotblock
 !set waitblock=!item 2 to -1 of $waitblock
 !read $docdir/$doc/$block.def
 <p>
 !goto newblock
!endif

</div><div class=wimstail>
<p><hr>
<table width="100%" border=0 cellspan=0 cellpadding=1>
<tr><td align=left nowrap><small>
By
!if $email=$empty
 $author
!else
 !mailurl $email $author
!endif
!! &copy;
<td align=right><small>
!href cmd=reply&job=read&doc=$doc&block=$startblock Interactive version
!if $wims_user=supervisor and $sheetdata!=$empty
 <tr><td align=left nowrap>
 <small>Last modified $datm
 <td align=right><small>
 !href cmd=reply&job=exosource&block=$startblock Source of exercises in the page
 </small>
!else
 <tr><td align=left colspan=2 nowrap>
 <small>Last modified $datm
!endif
</table>

