!set title=Une par une dans la suite
!if $wims_read_parm!=$empty
 !goto $wims_read_parm
!endif
oef2wims_version=3.22
language=fr
author=XIAO, Gang
email=xiao@unice.fr
computeanswer=no

ansorder=r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r
varcnt=97
prevarcnt=91
postvarcnt=5
replycnt=20
choicecnt=0
conditioncnt=0
feedbackcnt=0
format=html

val1=$imagedir
val2=$confparm1
val3=$confparm2
val4=$confparm3
val5=$confparm4

!if $testcondition=yes
 !goto test
!endif
!if $status=waiting
 !exit
!endif

!readproc slib/oef/env datafile 
tmp0=$slib_out
val6=$(tmp0)
tmp0=!recordcnt $val6

val7=$[rint($(tmp0))]
tmp0=!shuffle $val7

val8=$(tmp0)

!ifval $val2 notsametext
val9=$[rint($val2)]
!else
val9=$[rint(1)]
!endif

!ifval $val9 issametext NaN
val9=$[rint(1)]
!endif
val9=$[rint(min(min(20,$val7),max(1,$val9)))]
tmp0=!randint 0, $val7-$val9

val10=$[rint($(tmp0))]
tmp0=!values x+$val10 for x=1 to $val9

val11=$(tmp0)
val12=step
val13=Choix
tmp0=!record 0 of $val6

tmp1=!nonempty lines $(tmp0)

val14=$(tmp1)
tmp0=!linecnt $val14

val15=$[rint($(tmp0))]
val16=
!for val17 =1 to $val15 
val18=$(val14[$val17;])
tmp0=!char 1 to 3 of $val18

val19=$(tmp0)
tmp0=!char 4 to -1 of $val18

val18=$(tmp0)

!ifval $val19 issametext .IQ
val16=$val16 $val18
!endif
!next
tmp0=!itemcnt $val11

val20=$[rint($(tmp0))]
val21=$[rint(1)]
val22=$[rint(0)]
val23=
val24=$[rint(8)]

!ifval checkbox iswordof $val23
val25=checkbox
!else
val25=radio
!endif
val26=A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z
val27=
val28=
val29=
val30=
val31=
val32=
val33=
val34=
val35=
!for val36  in $val11 
tmp0=!record $val36 of $val6

tmp1=!trim $(tmp0)

val37=$(tmp1)
tmp0=!embraced randitem $val37

val37=$(tmp0)
tmp0=!line 1 of $val37

val38=$(tmp0)
tmp0=!rows2lines $val38

tmp1=!singlespace $(tmp0)

val38=$(tmp1)
tmp0=!linecnt $val37

val15=$[rint($(tmp0))]
val39=
val40=
val41=statement
val42=
!for val17 =2 to $val15 
tmp0=!line $val17 of $val37

tmp1=!trim $(tmp0)

val18=$(tmp1)
tmp0=!char 1 of $val18

val43=$(tmp0)
tmp0=!char 2 to -1 of $val18

val18=$(tmp0)
tmp0=!replace internal , by &#44; in $val18

val18=$(tmp0)
tmp0=!rows2lines $val18

tmp1=!singlespace $(tmp0)

val18=$(tmp1)
val41=$val41,$val18
!if $val43 issametext 0 
tmp0=!append item $val17 to $val40

val40=$(tmp0)
!endif
!if $val43 issametext 1 
tmp0=!append item $val17 to $val39

val39=$(tmp0)
!endif
!if $val43 isin Ff and $val17 > 2 
val42=$val42$val18
!endif
!if $val43 isin Hh 
val30=$val18
!endif
!if $val43 isin Ii 
tmp0=!trim $val18

val31=$(tmp0)
!endif
val42=$val42,
!next
tmp0=!itemcnt $val39

val44=$[rint($(tmp0))]
tmp0=!itemcnt $val40

val45=$[rint($(tmp0))]

!ifval $val21>$val44
val46=$[rint($val44)]
!else
val46=$[rint($val21)]
!endif

!ifval $val24 > $val45+$val21
val47=$[rint($val45+$val21)]
!else
val47=$[rint($val24)]
!endif

!ifval $val46>$val47-1
val46=$[rint($val47-1)]
!endif

!ifval $val22>$val47-$val46
val48=$[rint($val47-$val46)]
!else
val48=$[rint($val22)]
!endif
tmp0=!shuffle $val44

val49=$(tmp0)
tmp0=!item $val49 of $val39

val50=$(tmp0)
!if $val48>0 
tmp0=!item 1 to $val48 of $val40

val40=$(tmp0);
tmp0=!item $val48+1 to $val45 of $val40

val51=$(tmp0)
!else
val48=$[rint(0)]
val51=$val40
val40=
!endif
tmp0=!shuffle $val45

val52=$(tmp0)
tmp0=!item $val52 of $val51

val51=$(tmp0)
tmp0=!item 1 to $val46 of $val50

tmp1=!item 1 to $val47-$val46-$val48 of $val51

val53=$(tmp0),$val40 $(tmp1)
tmp0=!makelist 1 for x=1 to $val46

tmp1=!makelist 0 for x=1 to $val47-$val46

val54=$(tmp0),$(tmp1)
tmp0=!shuffle $val47

val55=$(tmp0)
tmp0=!item $val55 of $val54

val54=$(tmp0)
tmp0=!item $val55 of $val53

val53=$(tmp0)
tmp0=!positionof item 1 in $val54

val56=$(tmp0)
tmp0=!item 1 to $val47 of $val26

val57=$(tmp0)
val35=$val35$val47,
val28=$val28$val57;
val27=$val27$val56;
val32=$val32$(val42[$val53]);
val53=$(val41[$val53])
val29=$val29$val53;
val33=$val33$val38;
!next
val58=
val59=
val60=
tmp0=!makelist r x for x=1 to $val20

val61=$(tmp0)

!ifval $val12 notsametext all
tmp0=!items2lines $val61

val61=$(tmp0)
!endif
oefsteps=$val61 
nextstep=!nosubst $val61 
!readproc oef/steps.proc
replytype1=$val25

replyoption1=$val23 
replyname1=$val13 1
replygood1=$(val27[1;]);$(val28[1;])
replytype2=$val25

replyoption2=$val23 
replyname2=$val13 2
replygood2=$(val27[2;]);$(val28[2;])
replytype3=$val25

replyoption3=$val23 
replyname3=$val13 3
replygood3=$(val27[3;]);$(val28[3;])
replytype4=$val25

replyoption4=$val23 
replyname4=$val13 4
replygood4=$(val27[4;]);$(val28[4;])
replytype5=$val25

replyoption5=$val23 
replyname5=$val13 5
replygood5=$(val27[5;]);$(val28[5;])
replytype6=$val25

replyoption6=$val23 
replyname6=$val13 6
replygood6=$(val27[6;]);$(val28[6;])
replytype7=$val25

replyoption7=$val23 
replyname7=$val13 7
replygood7=$(val27[7;]);$(val28[7;])
replytype8=$val25

replyoption8=$val23 
replyname8=$val13 8
replygood8=$(val27[8;]);$(val28[8;])
replytype9=$val25

replyoption9=$val23 
replyname9=$val13 9
replygood9=$(val27[9;]);$(val28[9;])
replytype10=$val25

replyoption10=$val23 
replyname10=$val13 10
replygood10=$(val27[10;]);$(val28[10;])
replytype11=$val25

replyoption11=$val23 
replyname11=$val13 11
replygood11=$(val27[11;]);$(val28[11;])
replytype12=$val25

replyoption12=$val23 
replyname12=$val13 12
replygood12=$(val27[12;]);$(val28[12;])
replytype13=$val25

replyoption13=$val23 
replyname13=$val13 13
replygood13=$(val27[13;]);$(val28[13;])
replytype14=$val25

replyoption14=$val23 
replyname14=$val13 14
replygood14=$(val27[14;]);$(val28[14;])
replytype15=$val25

replyoption15=$val23 
replyname15=$val13 15
replygood15=$(val27[15;]);$(val28[15;])
replytype16=$val25

replyoption16=$val23 
replyname16=$val13 16
replygood16=$(val27[16;]);$(val28[16;])
replytype17=$val25

replyoption17=$val23 
replyname17=$val13 17
replygood17=$(val27[17;]);$(val28[17;])
replytype18=$val25

replyoption18=$val23 
replyname18=$val13 18
replygood18=$(val27[18;]);$(val28[18;])
replytype19=$val25

replyoption19=$val23 
replyname19=$val13 19
replygood19=$(val27[19;]);$(val28[19;])
replytype20=$val25

replyoption20=$val23 
replyname20=$val13 20
replygood20=$(val27[20;]);$(val28[20;])
question=__EXECUTED_1692754_EXERCISE__
hint=!nosubst $val30


!goto stat

!exit

:question
$()	 
!if $val31 notsametext  
$()	  <img align=right hspace=10 src=$val1/$val31/> <p>	 
!endif
$()	$val16	 
!for m_q=1 to $val20 
$()	  
!if $val12 issametext all or ($m_status issametext end and $m_q<=$m_step) or $m_q=$m_step 
$()	   
!if $val20>1 
$()<p> $m_q.  
!endif
$()	  $(val33[$m_q;])	  <p><table border=0 cellspacing=4>	   
!for m_i=1 to $(val35[$m_q]) 
$()	   <tr><td nowrap> 
!read oef/embed.phtml reply \q,\i 
$().</td>	   <td>$(val29[$m_q;$m_i])</td></tr>	   
!next
$()	  </table>	   
!if $m_status issametext end and $(val58[$m_q])>0 and $(val32[$m_q;$(val58[$m_q])]) notsametext  
$()	   <p><font color=$(val59[$m_q])><em>$(val32[$m_q;$(val58[$m_q])])</em></font>	   
!endif
$()	   
!if $m_q<$val20 and ($val12 issametext all or $m_q<$m_step) 
$()<p><hr/> 
!endif
$()	  
!endif
$()	 
!next
$()	 
!if $val31 notsametext  
$()<br clear=right/> 
!endif
$()	
$()
!exit

:hint
$()$val30
$()
!exit

:help
$()
$()
!exit

:solution
$()
$()
!exit

:postdef
val60=$m_reply1,$m_reply2,$m_reply3,$m_reply4,$m_reply5,$m_reply6,$m_reply7,\preply8,\preply9,$m_reply10,	  $m_reply11,$m_reply12,$m_reply13,$m_reply14,$m_reply15,$m_reply16,$m_reply17,\preply8,\preply9,$m_reply20
!for val62 =1 to $val20 
tmp0=!positionof item $(val60[$val62]) in $val26

val54=$(tmp0)
val58=$val58$val54,

!ifval $val54 isitemof $(val27[$val62;])
val59=$(val59[])green,
!else
val59=$(val59[])red,
!endif
!next

!exit

:feedback

!exit

:test

!exit

:stat
vsavelist=1,12,16,20,26,27,29,30,31,32,33,35,54,58,59,60
embedcnt=1
