!nocache
!! useful when one comes from modtool
!set modu_lang=$lang
!read oef/$lang/names
!if $lang_exists!=yes
   !let modu_lang=en
   !read oef/$lang/names
!endif

!set proc=oef
!if robot isin $session
 !changeto content.html
!endif

!set test_data=!replace internal data/ by in $module_data
!set test_data=!defof title in datamodule/$test_data/INDEX
!if $test_data= and $module_data!=
   <p><i>
   $name_datamodule
   </i>
!endif
<p><center><hr width="35%"></center> <p>

!if robot isin $session
 !changeto content.html
!endif

!if $special_parm3!=$empty
 !let tmp=!replace internal ; by $ $ in $special_parm3
 !for cle in exo,qnum,qcmlevel,scoredelay,intro_qcmpresent,intro_presentsol,intro_check,confparm1,confparm2,confparm3,confparm4,confparm5,confparm6,confparm7,confparm8,intro_expert
  !let t=!getopt $(cle) in $tmp
  !default $(cle)=$t
 !next cle
 !if $scoredelay=0
  !reset scoredelay
 !endif
 !if $exo=0
  !reset exo
 !endif
 !if yes isin $intro_expert
  !let special_parm2=!append word expert to $special_parm4
 !endif
!endif

!if $wims_class!=$empty and $wims_user=supervisor and $special_parm3=$empty
 !distribute line $wims_oefdefault_qnum\
$wims_oefdefault_qcmlevel\
$wims_oefdefault_scoredelay\
$wims_oefdefault_qcmpresent\
$wims_oefdefault_presentsol\
$wims_oefdefault_check into qnum,qcmlevel,scoredelay,intro_qcmpresent,intro_presentsol,intro_check
 !let special_parm2=$special_parm expert
!endif
!reset special_parm3

!if ////classes/ isin ////$module
 !set class_header=wimshome/log/classes/$wims_class/
!endif

!read $(class_header)Exindex
!set exocnt=!itemcnt $exolist
!set qcnt=$[min($exocnt,8)]
!if $exocnt<1
 !if $wims_user=supervisor and #classes/ isin #$module
  !set wims_menu_items=!append line add_exo,1,module=adm/createxo\
  to $wims_menu_items
 !else
  $name_noexercise
 !endif
 !exit
!endif
!if $exocnt=1
 $name_oneexercise, <b>
 !item 1 of $titlelist
 </b>.
!endif

!form new
<input type="hidden" name="module" value="$module">
<center><table id="oef_intro_params"><caption>$name_menu</caption>
!if $exocnt>1
<tr>
 !set special_parm=!trim $special_parm
 !if select iswordof $special_parm2 and $special_parm!=$empty
  <td align="center">$name_exercisescontaining<br>
  <em><font color="blue">$special_parm</font></em>&nbsp;:<td>
 !else
  <td align="center">$name_chooseexo:<td>
 !endif
 !read oef/select.phtml
!endif
<tr><td align="center">$name_oneserie<td>
!default qnum=1
!formselect qnum from 1 to 9
 $name_exercises.
<tr><td align="center">$name_levelseverity<td>
!default qcmlevel=3
!formselect qcmlevel from 1 to 9
<tr><td align="center">$name_chrono<td>
<input size="7" name="scoredelay" value="$scoredelay"> $name_secondes.
</td></tr>
!read introhook.phtml
!if expert iswordof $special_parm2
   <tr><td colspan="2"><fieldset>
   <legend>Paramètrage expert</legend>
   <table>
   <tr><td align="center">
   $name_qcmanswer: </td><td>
   !default intro_qcmpresent=4
   !formselect intro_qcmpresent list 2,3,4,5,6,7,8 
   </td></tr>
   <tr><td align="center">$name_solutiongiven? </td><td>
   !default intro_presentsol=1
   !formselect intro_presentsol list 0,1,2 prompt $name_choice
   <tr><td rowspan="4">&nbsp;</td><td>
   !default intro_check=1,2,3,4
   !formcheckbox intro_check list 1 prompt $(name_choice_check[1])
   </td></tr>
   <tr><td align="left">
   !formcheckbox intro_check list 2 prompt $(name_choice_check[2])
   </td></tr>
   <tr><td align="left">
   !formcheckbox  intro_check list 3 prompt $(name_choice_check[3])
   </td></tr>
   <tr><td align="left">
   !formcheckbox intro_check list 4 prompt $(name_choice_check[4])
   !let tmp=!replace word expert by $ in $special_parm2
    <input type="hidden" name="intro_expert" value="yes">
    </td></tr>
  </table></legend></td></tr><tr>
   <td colspan="2" align="center">
   !set wims_ref_class=wims_button
   !href module=$module&special_parm=$special_parm&special_parm2=$tmp&special_parm3=$special_parm3&special_parm4=$special_parm4 $name_simplifiedmenu
!else
   <tr><td colspan="2" align="center">
   !let tmp=$special_parm2 expert
   !set wims_ref_class=wims_button
   !href module=$module&special_parm=$special_parm&special_parm2=$tmp&special_parm3=$special_parm3&special_parm4=$special_parm4 $name_expertmenu
!endif
</td></tr></table></center> <p><center>
<input type="submit" value="$wims_name_work">&nbsp;
<input type="submit" name="print" value="$name_print">
<input type="hidden" name="special_parm2" value="$special_parm2">
<input type="hidden" name="special_parm4" value="$special_parm4">
</center>
</form>

!if $exocnt>10
 !form intro
 <input type="hidden" name="special_parm2" value="select $special_parm2">
 <input type="hidden" name="special_parm3" value="$special_parm3">
 <input type="hidden" name="special_parm4" value="$special_parm4">
 <input type="hidden" name="module" value="$module">
 $name_select
 <input size="12" maxlength="12" name="special_parm" value="$special_parm">
 <input type="submit" value="$wims_name_send">
 </form>
!endif

$name_remarkintro1

!if * isin $titlelist
 <p>$name_remarkintro2
!endif

<p><div class="wims_smallremark">
$name_remarkintro3
</div>



