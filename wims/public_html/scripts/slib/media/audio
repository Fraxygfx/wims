!if $wims_read_parm!=slib_header
 !goto proc
!endif


slib_author=Bernadette, Perrin-Riou

slib_example=\imagedir/exemple.mp3\
http://packs.shtooka.net/eng-balm-verbs/mp3/eng-I_bought.mp3\
http://packs.shtooka.net/eng-balm-verbs/mp3/eng-I_bought.mp3,width="100" height=20,player=dewplayer\
http://packs.shtooka.net/eng-balm-verbs/mp3/eng-I_bought.mp3,,player=hbs_mp3_player\
http://packs.shtooka.net/eng-balm-verbs/mp3/eng-I_bought.mp3,,player=player_mp3_multi
!exit

:proc
!!!if ...adm/ isin ...$module or .. isin $wims_read_parm or $wims_read_parm=$empty
!! !exit
!!!endif
!reset slib_out
!distribute items $wims_read_parm into slib_son,slib_option,slib_option1

slib_option2 = !getopt option in $slib_option1
slib_player=!getopt player in $slib_option1

!if rename iswordof $slib_option
   slib_son=!rename $slib_son
!endif
slib_sontest=!replace internal . by , in $slib_son
slib_son=!replace internal cgi? by $(slib_sontest[-1])? in $slib_son
!if $slib_player=
  !default slib_option=height="20" width="150" autostart="false" loop="false"
  slib_out =<object><embed src="$slib_son" $slib_option > <noembed> <bgsound src="$slib_son"></noembed></embed></object>
!else
 !if $slib_player iswordof hbs_mp3_player
  !default slib_option=height="16" width="60" autostart="false" loop="false"
    slib_player=player 
  !else
   !default slib_option=height="20" width="180" autostart="false" loop="false"
  !endif
 !read slib/media/$slib_player $slib_son,$slib_option
!endif

 
