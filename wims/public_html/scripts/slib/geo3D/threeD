!if $wims_read_parm!=slib_header
 !goto proc
!endif
slib_title=ThreeD Applet

slib_author=Bernadette, Perrin-Riou

!exit

:proc

!default slib_cnt=0
slib_cnt= $[$slib_cnt +1]
slib_data = !item 1 of $wims_read_parm
slib_option= !item -1 of $wims_read_parm

!for slib_a in scale,width,height,rotinx,rotiny
  slib_$slib_a=!getopt $slib_a in $slib_option
!next slib_a

!default slib_scale=0.8
!default slib_width=300
!default slib_height=300

slib_data=!translate $	$ to $\
$ in $slib_data
slib_fichier=fichier.$slib_cnt
slib_fichier=$wims_nowseconds.$slib_cnt

!readproc oef/togetfile.proc $slib_fichier new\
$slib_data
slib_out=$wims_ref_name?session=$session&+cmd=getfile&+special_parm=$slib_fichier

slib_out=<applet codebase="java/ThreeD" code="ThreeD.class" archive="ThreeD.jar" width="$slib_width" height="$slib_height">\
<param name="model" value="$slib_out"/>\
<param name="scale" value="$slib_scale"/>\
<param name="rotinx" value="$slib_rotinx"/>\
<param name="rotiny" value="$slib_rotiny"/>\
</applet>

