!reset xsize ysize show_hydrogen show_carbon showfile
!set appletdir=java/WIMSchem
!set anstype=yes
!set anstyle=dprompt
!set ans_require=checkmol,matchmol,WIMSchem

!set oef_js_submit=ReadThis()
!if $wims_read_parm=def
 !exit
!endif

!set wims_backslash_insmath=no

!set oef_applet_option=!replace internal $	$ by $\
$ in $inputsize
!set oef_applet_option=!replace internal ; by $\
$ in $oef_applet_option
!set oef_applet_option=!nonempty lines $oef_applet_option
!set Inputsize=!line 1 of $oef_applet_option
!set test=!text remove 0123456789x in $Inputsize

!if $test issametext $empty
 !set Inputsize=!replace internal x by , in $Inputsize
 !set oef_applet_option=!line 2 to -1 of $oef_applet_option
 !distribute items $Inputsize into xsize,ysize
!endif

!default xsize=540
!default ysize=380
!for opt in show_carbon, show_hydrogen,showfile,rotation
  !set $opt=!getopt $opt in $oef_applet_option
!next

!default show_hydrogen=yes
!default show_carbon=no
!default showfile=yes

!set atoms=!getopt atoms in $oef_applet_option

!if $atoms!=
  !set atoms=!words2items $atoms
  !set atoms=!nospace $atoms
  !set atoms=<param name="atoms" value="$atoms" />
!endif
!set template=!getopt template in $oef_applet_option
!if $template notsametext
  !set templ=
  !set cnt_=0
  !if cyclo iswordof $template
   !set cyclo=cyclopropane,cyclobutane,cyclopentane,cyclohexane,cycloheptane,cyclooctane
   !for t_=1 to 6
    !set temp=!record 0 of data/chem/templ/$(cyclo[$t_]).el
    !readproc oef/togetfile.proc $(cyclo[$t_]).el new\
$temp
   !set templ=$templ\
 <param name="template$t_" value="$wims_ref_name?session=$session&+cmd=getfile&+special_parm=$(cyclo[$t_]).el" />
  !next
  !set cnt_=$[$cnt_+6]
 !endif
 !set template=!words2items $template
 !set temp_cnt=!itemcnt $template
 !for s_=1 to $temp_cnt
  !if $(template[$s_]) notsametext cyclo
   !set temp_mol=!record 0 of data/$(template[$s_])
   !if $temp_mol=
     !set temp_mol=!record 0 of data/chem/templ/$(template[$s_]).el
   !endif
   !set temp_file=!replace internal / by _ in $(template[$s_])
   !readproc oef/togetfile.proc $temp_file new\
$temp_mol
   !set cnt_=$[$cnt_+1]
   !set templ=$templ\
   <param name="template$cnt_" value="$wims_ref_name?session=$session&+cmd=getfile&+special_parm=$temp_file" />
  !endif
 !next
!endif

!set file=!rows2lines $(replygood$i)
!set file=!replace internal ; by $\
$ in $file

!set file=!line 2 to -1 of $file
!set file=!replace internal $	$ by $\
$ in $file
!set test_file=!linecnt $file
!set File=

!if $file!= and $test_file=1
   !set file=!words2items $file
   !for files in $file
    !set temp=!record 0 of $files
    !set file0=!replace internal / by , in $files
    !readproc oef/togetfile.proc $(file0[-1]) new\
$temp
  !set File=!append line <span id="file" style="display:none">$wims_ref_name?session=$session&+cmd=getfile&+special_parm=$(file0[-1])</span> to $File
  !next
 !else
  !if $test_file>1
   !set file1=jmol_$wims_nowseconds_$i
  !readproc oef/togetfile.proc $file1 new\
$file
  !set File=!append line <span id="file" style="display:none">$wims_ref_name?session=$session&+cmd=getfile&+special_parm=$file1</span> to $File
  !endif
!endif

!set list=TOOL_CURSOR,TOOL_ROTATOR,TOOL_ERASOR,TOOL_DIALOG,TOOL_EDIT,\
TOOL_SETATOM,TOOL_SINGLE,TOOL_DOUBLE,TOOL_TRIPLE,TOOL_ZERO,\
TOOL_INCLINED,TOOL_DECLINED,TOOL_UNKNOWN,TOOL_CHARGE,TOOL_UNDO,TOOL_REDO,\
TOOL_TEMPLATE,TOOL_CUT,TOOL_COPY,TOOL_PASTE,\
MENU_BLOCK,MENU_SELECT,MENU_TRANSFORM,MENU_ZOOM,MENU_SHOW,MENU_HYDROGEN,MENU_STEREO,\
TOOL_SELECT,TOOL_UNSELECT
!set list_m=!lower $list
!set list_default=1,0,0,0,0,\
0,0,0,0,0,\
0,0,0,0,0,0,\
0,0,0,0,\
0,0,0,0,0,0,0,\
1,1

!set listcnt=!itemcnt $list
!set params=
!for u_ =1 to $listcnt
 !set a_=$(list_m[$u_])
 !set a__=$(list[$u_])
 !set b_=!getopt $a_ in $oef_applet_option
 !bound $b_ within yes, no, 1, 0
 !if $b_=
   !set b_=$(list_default[$u_])
 !endif
 !set params=!append line <param name="$a__" value="$b_" /> to $params
!next
<script type="text/javascript">
/*<![CDATA[*/
function ReadThis(){
  var wimschem=document.getElementById('WIMSchem$i');
  var mol=wimschem.GetMoleculeMDLMol();
  var atoms=wimschem.ReadAtomSelection();
  var bonds=wimschem.ReadBondSelection();
  document.getElementById('WIMSchemreply$i').value = atoms +';' + bonds + '\n'+ mol;
  wimschem.destroy();
	 }
/*]]>*/
</script>
!if $File!=$empty
  !default rotation=!randitem 0,30,45,60,90,120,135,150,180,-30,-45,-60,-90,-120,-135,-150,-180
  !set parm_angle=<param name="rotation" value="$rotation" />
  !set oef_applet_option=!append line rotation=$rotation to $oef_applet_option
!endif
<input type="hidden" name="reply$i" id="WIMSchemreply$i" value="" />
!if help isin $(replyoption$i)
 !set help_option=!getopt help in $(replyoption$i)
 !set help_option=!replace internal help by in $help_option
 !set help_option=!declosing $help_option
 !set help_option=!words2items $help_option
 !set help_option=!nonempty items $help_option
 !default help_option=select_atom,select_bond
 <div style="text-align:right; width:60%">
 !read anstype/chemdraw.inc $help_option
 </div>
!endif

<script src="scripts/js/ketcher/js_init.js"></script>
<script src="scripts/js/ketcher/prototype-min.js"></script>
<script src="scripts/js/ketcher/raphael-min.js"></script>
<script src="scripts/js/ketcher/ketcher.js"></script>
<main id="chemclick" role="applicaion">
  $templ
  $atoms
  $params
  <param name="default_bond_select_color" value="255,0,255" />
  $parm_angle
  $File
    <div id="canvas"></div>
    <menu role="toolbar">
      <li id="mainmenu">
        <menu>
          <li id="edit">
            <menu>
              <li id="undo">
                <button data-keys="Defmod-Z">Undo</button>
              </li>
              <li id="redo">
                <button data-keys="Defmod-Shift-Z, Defmod-Y">Redo</button>
              </li>
            </menu>
          </li>
          <li id="zoom">
            <menu>
              <li id="zoom-in">
                <button data-keys="+, =, Shift-=">Zoom In</button>
              </li>
              <li id="zoom-out">
                <button data-keys="minus, Shift-minus">Zoom Out</button>
              </li>
              <li id="zoom-list">
                <select>
                  <option>20%</option>
                  <option>30%</option>
                  <option>40%</option>
                  <option>50%</option>
                  <option>60%</option>
                  <option>70%</option>
                  <option>80%</option>
                  <option>90%</option>
                  <option selected>100%</option>
                  <option>110%</option>
                  <option>120%</option>
                  <option>130%</option>
                  <option>140%</option>
                  <option>150%</option>
                  <option>170%</option>
                  <option>200%</option>
                  <option>250%</option>
                  <option>300%</option>
                  <option>350%</option>
                  <option>400%</option>
                </select>
              </li>
            </menu>
          </li>
          <li id="process">
          </li>
          <li id="meta">
            <menu>
              <li id="info">
                <button data-keys="Shift-/">About</button>
              </li>
            </menu>
          </li>
        </menu>
      </li>
      <li id="toolbox">
        <menu>
          <li id="select">
            <menu>
              <li id="select-lasso">
                <button data-keys="Esc">Lasso Selection</button>
              </li>
              <li id="select-rectangle">
                <button data-keys="Esc">Rectangle Selection</button>
              </li>
              <li id="select-fragment">
                <button data-keys="Esc">Fragment Selection</button>
              </li>
            </menu>
          </li>
          <li id="erase">
            <button data-keys="Del, Backspace">Erase</button>
          </li>
          <li id="bond">
            <menu>
              <li id="bond-common">
                <menu>
                  <li id="bond-single">
                    <button data-keys="1">Single Bond</button>
                  </li>
                  <li id="bond-double">
                    <button data-keys="2">Double Bond</button>
                  </li>
                  <li id="bond-triple">
                    <button data-keys="3">Triple Bond</button>
                  </li>
                </menu>
              </li>
              <li id="bond-stereo">
                <menu>
                  <li id="bond-up">
                    <button data-keys="1">Single Up Bond</button>
                  </li>
                  <li id="bond-down">
                    <button data-keys="1">Single Down Bond</button>
                  </li>
                  <li id="bond-updown">
                    <button data-keys="1">Single Up/Down Bond</button>
                  </li>
                  <li id="bond-crossed">
                    <button data-keys="2">Double Cis/Trans Bond</button>
                  </li>
                </menu>
              </li>
              <li id="bond-query">
                <menu>
                  <li id="bond-any">
                    <button data-keys="0">Any Bond</button>
                  </li>
                  <li id="bond-aromatic">
                    <button data-keys="4">Aromatic Bond</button>
                  </li>
                  <li id="bond-singledouble">
                    <button>Single/Double Bond</button>
                  </li>
                  <li id="bond-singlearomatic">
                    <button>Single/Aromatic Bond</button>
                  </li>
                  <li id="bond-doublearomatic">
                    <button>Double/Aromatic Bond</button>
                  </li>
                </menu>
              </li>
            </menu>
          </li>
          <li id="chain">
            <button>Chain</button>
          </li>
          <li id="charge">
            <menu>
              <li id="charge-plus">
                <button data-keys="5">Charge Plus</button>
              </li>
              <li id="charge-minus">
                <button data-keys="5">Charge Minus</button>
              </li>
            </menu>
          </li>
        </menu>
      </li>
      <li id="template">
        <menu>
          <li id="template-common">
            <menu>
              <li id="template-0">
                <button data-keys="T">Benzene</button>
              </li>
              <li id="template-1">
                <button data-keys="T">Cyclopentadiene</button>
              </li>
              <li id="template-2">
                <button data-keys="T">Cyclohexane</button>
              </li>
              <li id="template-3">
                <button data-keys="T">Cyclopentane</button>
              </li>
              <li id="template-4">
                <button data-keys="T">Cyclopropane</button>
              </li>
              <li id="template-5">
                <button data-keys="T">Cyclobutane</button>
              </li>
              <li id="template-6">
                <button data-keys="T">Cycloheptane</button>
              </li>
              <li id="template-7">
                <button data-keys="T">Cyclooctane</button>
              </li>
            </menu>
          </li>
        </menu>
      </li>
      <li id="elements">
        <menu>
          <li id="atom">
            <menu>
              <li id="atom-h">
                <button title="Hydrogen" class="atom-h diatomic gas" data-number="1" data-keys="H">H</button>
              </li>
              <li id="atom-c">
                <button title="Carbon" class="atom-c polyatomic" data-number="6" data-keys="C">C</button>
              </li>
              <li id="atom-n">
                <button title="Nitrogen" class="atom-n diatomic gas" data-number="7" data-keys="N">N</button>
              </li>
              <li id="atom-o">
                <button title="Oxygen" class="atom-o diatomic gas" data-number="8" data-keys="O">O</button>
              </li>
            </menu>
          </li>
          <li id="period-table">
            <button>Periodic table</button>
          </li>
        </menu>
      </li>
    </menu>
    <div class="overlay" style="display:none">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="64" height="64" id="loading" style="display:none">
        <circle cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(45 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.125s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(90 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.25s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(135 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.375s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(225 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.625s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(270 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.75s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(315 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.875s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
        <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
          <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
        </circle>
      </svg>
      <form></form>
      <form role="dialog" id="atom_properties" style="display:none;">
        <header>Atom Properties</header>
        <fieldset class="main">
          <label>Label:
            <input id="atom_label" type="text" maxlength="2">
          </label>
          <label>Number:
            <input id="atom_number" type="text" readonly="readonly" maxlength="3">
          </label>
          <label>Charge:
            <input id="atom_charge" type="text" maxlength="3">
          </label>
          <label>Valency:
            <select id="atom_valence">
              <option value=""></option>
              <option value="0">0</option>
              <option value="1">I</option>
              <option value="2">II</option>
              <option value="3">III</option>
              <option value="4">IV</option>
              <option value="5">V</option>
              <option value="6">VI</option>
              <option value="7">VII</option>
              <option value="8">VIII</option>
            </select>
          </label>
          <label>Isotope:
            <input id="atom_isotope" type="text" maxlength="3">
          </label>
          <label>Radical:
            <select id="atom_radical">
              <option value="0"></option>
              <option value="2">Monoradical</option>
              <option value="1">Diradical (singlet)</option>
              <option value="3">Diradical (triplet)</option>
            </select>
          </label>
        </fieldset>
        <fieldset class="query">
          <legend>Query specific</legend>
          <label>Ring bond count:
            <select id="atom_ringcount">
              <option value="0"></option>
              <option value="-2">As drawn</option>
              <option value="-1">0</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </label>
          <label>H count:
            <select id="atom_hcount">
              <option value="0"></option>
              <option value="1">0</option>
              <option value="2">1</option>
              <option value="3">2</option>
              <option value="4">3</option>
              <option value="5">4</option>
            </select>
          </label>
          <label>Substitution count:
            <select id="atom_substitution">
              <option value="0"></option>
              <option value="-2">As drawn</option>
              <option value="-1">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
            </select>
          </label>
          <label>Unsaturation:
            <select id="atom_unsaturation">
              <option value="0"></option>
              <option value="1">Unsaturated</option>
            </select>
          </label>
        </fieldset>
        <fieldset class="reaction">
          <legend>Reaction flags</legend>
          <label>Inversion:
            <select id="atom_inversion">
              <option value="0"></option>
              <option value="1">Inverts</option>
              <option value="2">Retains</option>
            </select>
          </label>
          <label>Exact:
            <select id="atom_exactchange">
              <option value="0"></option>
              <option value="1">Exact change</option>
            </select>
          </label>
        </fieldset>
        <footer>
          <input id="atom_prop_cancel" type="button" value="Cancel">
          <input id="atom_prop_ok" type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="about_dialog" style="display:none;">
        <header>About</header>
        <a href="http://lifescience.opensource.epam.com/ketcher/" target="_blank">
          <img src="gifs/ketcher/logo.jpg">
        </a>
        <dl>
          <dt>
            <a href="http://lifescience.opensource.epam.com/ketcher/#overview" target="_blank">Ketcher</a>
          </dt>
          <dd>
            version
            <var>2.0.0-alpha.3</var>
          </dd>
          <dt>
            <a href="http://lifescience.opensource.epam.com/" target="_blank">EPAM Life Sciences</a>
          </dt>
          <dd>
            <a href="http://lifescience.opensource.epam.com/ketcher/#feedback" target="_blank">Feedback</a>
          </dd>
        </dl>
        <footer>
          <input id="close_about_dialog" type="button" onclick="ui.hideDialog('about_dialog')" value="Close">
        </footer>
      </form>
      <form role="dialog" id="atom_attpoints" style="display:none;">
        <header>Attachment Points</header>
        <label>
          <input type="checkbox" id="atom_ap1">Primary attachment point
        </label>
        <label>
          <input type="checkbox" id="atom_ap2">Secondary attachment point
        </label>
        <footer>
          <input id="atom_attpoints_cancel" type="button" value="Cancel">
          <input id="atom_attpoints_ok" type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="automap_properties" style="display:none;">
        <header>Reaction Auto-Mapping</header>
        <label>Mode:
          <select id="automap_mode">
            <option value="discard">Discard</option>
            <option value="keep">Keep</option>
            <option value="alter">Alter</option>
            <option value="clear">Clear</option>
          </select>
        </label>
        <footer>
          <input id="automap_cancel" type="button" value="Cancel">
          <input id="automap_ok" type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="bond_properties" style="display:none;">
        <header>
          Bond Properties
        </header>
        <label>Type:
          <select id="bond_type">
            <option value="single">Single</option>
            <option value="up">Single Up</option>
            <option value="down">Single Down</option>
            <option value="updown">Single Up/Down</option>
            <option value="double">Double</option>
            <option value="crossed">Double Cis/Trans</option>
            <option value="triple">Triple</option>
            <option value="aromatic">Aromatic</option>
            <option value="any">Any</option>
            <option value="singledouble">Single/Double</option>
            <option value="singlearomatic">Single/Aromatic</option>
            <option value="doublearomatic">Double/Aromatic</option>
          </select>
        </label>
        <label>Topology:
          <select id="bond_topology">
            <option value="0">Either</option>
            <option value="1">Ring</option>
            <option value="2">Chain</option>
          </select>
        </label>
        <label>Reacting Center:
          <select id="bond_center">
            <option value="0">Unmarked</option>
            <option value="-1">Not center</option>
            <option value="1">Center</option>
            <option value="2">No change</option>
            <option value="4">Made/broken</option>
            <option value="8">Order changes</option>
            <option value="12">Made/broken and changes</option>
          </select>
        </label>
        <footer>
          <input id="bond_prop_cancel" type="button" value="Cancel">
          <input id="bond_prop_ok" type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="open-file" style="display:none;">
        <header>Open Structure</header>
        <textarea></textarea>
        <label>
          <input type="checkbox" name="fragment">Load as a fragment and copy to the Clipboard
        </label>
        <footer>
          <label class="open">
            Open From File…
            <input accept="chemical/x-mdl-molfile,chemical/x-mdl-rxnfile,chemical/x-cml,chemical/x-daylight-smiles,chemical/x-inchi,.mol,.rxn,.cml,.smi,.smiles,.inchi" type="file">
          </label>
          <input type="button" value="Cancel">
          <input type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="elem-table" style="display:none;">
        <header>Periodic table</header>
        <table summary="Periodic table of the chemical elements">
          <tr>
            <th></th>
            <th>1</th>
            <th>2</th>
            <th>3</th>
            <th>4</th>
            <th>5</th>
            <th>6</th>
            <th>7</th>
            <th>8</th>
            <th>9</th>
            <th>10</th>
            <th>11</th>
            <th>12</th>
            <th>13</th>
            <th>14</th>
            <th>15</th>
            <th>16</th>
            <th>17</th>
            <th>18</th>
          </tr>
          <tr>
            <th>
              1
            </th>
            <td>
              <button title="Hydrogen" class="atom-h diatomic gas" value="1">H</button>
            </td>
            <td colspan="16"></td>
            <td>
              <button title="Helium" class="atom-he noble gas" value="2">He</button>
            </td>
          </tr>
          <tr>
            <th>2</th>
            <td>
              <button title="Lithium" class="atom-li alkali metal" value="3">Li</button>
            </td>
            <td>
              <button title="Beryllium" class="atom-be alkaline-earth metal" value="4">Be</button>
            </td>
            <td colspan="10"></td>
            <td>
              <button title="Boron" class="atom-b metalloid" value="5">B</button>
            </td>
            <td>
              <button title="Carbon" class="atom-c polyatomic" value="6">C</button>
            </td>
            <td>
              <button title="Nitrogen" class="atom-n diatomic gas" value="7">N</button>
            </td>
            <td>
              <button title="Oxygen" class="atom-o diatomic gas" value="8">O</button>
            </td>
            <td>
              <button title="Fluorine" class="atom-f diatomic gas" value="9">F</button>
            </td>
            <td>
              <button title="Neon" class="atom-ne noble gas" value="10">Ne</button>
            </td>
          </tr>
          <tr>
            <th>3</th>
            <td>
              <button title="Sodium" class="atom-na alkali metal" value="11">Na</button>
            </td>
            <td>
              <button title="Magnesium" class="atom-mg alkaline-earth metal" value="12">Mg</button>
            </td>
            <td colspan="10"></td>
            <td>
              <button title="Aluminium" class="atom-al post-transition metal" value="13">Al</button>
            </td>
            <td>
              <button title="Silicon" class="atom-si metalloid" value="14">Si</button>
            </td>
            <td>
              <button title="Phosphorus" class="atom-p polyatomic" value="15">P</button>
            </td>
            <td>
              <button title="Sulfur" class="atom-s polyatomic" value="16">S</button>
            </td>
            <td>
              <button title="Chlorine" class="atom-cl diatomic gas" value="17">Cl</button>
            </td>
            <td>
              <button title="Argon" class="atom-ar noble gas" value="18">Ar</button>
            </td>
          </tr>
          <tr>
            <th>4</th>
            <td>
              <button title="Potassium" class="atom-k alkali metal" value="19">K</button>
            </td>
            <td>
              <button title="Calcium" class="atom-ca alkaline-earth metal" value="20">Ca</button>
            </td>
            <td>
              <button title="Scandium" class="atom-sc transition metal" value="21">Sc</button>
            </td>
            <td>
              <button title="Titanium" class="atom-ti transition metal" value="22">Ti</button>
            </td>
            <td>
              <button title="Vanadium" class="atom-v transition metal" value="23">V</button>
            </td>
            <td>
              <button title="Chromium" class="atom-cr transition metal" value="24">Cr</button>
            </td>
            <td>
              <button title="Manganese" class="atom-mn transition metal" value="25">Mn</button>
            </td>
            <td>
              <button title="Iron" class="atom-fe transition metal" value="26">Fe</button>
            </td>
            <td>
              <button title="Cobalt" class="atom-co transition metal" value="27">Co</button>
            </td>
            <td>
              <button title="Nickel" class="atom-ni transition metal" value="28">Ni</button>
            </td>
            <td>
              <button title="Copper" class="atom-cu transition metal" value="29">Cu</button>
            </td>
            <td>
              <button title="Zinc" class="atom-zn transition metal" value="30">Zn</button>
            </td>
            <td>
              <button title="Gallium" class="atom-ga post-transition metal" value="31">Ga</button>
            </td>
            <td>
              <button title="Germanium" class="atom-ge metalloid" value="32">Ge</button>
            </td>
            <td>
              <button title="Arsenic" class="atom-as metalloid" value="33">As</button>
            </td>
            <td>
              <button title="Selenium" class="atom-se polyatomic" value="34">Se</button>
            </td>
            <td>
              <button title="Bromine" class="atom-br diatomic liquid" value="35">Br</button>
            </td>
            <td>
              <button title="Krypton" class="atom-kr noble gas" value="36">Kr</button>
            </td>
          </tr>
          <tr>
            <th>5</th>
            <td>
              <button title="Rubidium" class="atom-rb alkali metal" value="37">Rb</button>
            </td>
            <td>
              <button title="Strontium" class="atom-sr alkaline-earth metal" value="38">Sr</button>
            </td>
            <td>
              <button title="Yttrium" class="atom-y transition metal" value="39">Y</button>
            </td>
            <td>
              <button title="Zirconium" class="atom-zr transition metal" value="40">Zr</button>
            </td>
            <td>
              <button title="Niobium" class="atom-nb transition metal" value="41">Nb</button>
            </td>
            <td>
              <button title="Molybdenum" class="atom-mo transition metal" value="42">Mo</button>
            </td>
            <td>
              <button title="Technetium" class="atom-tc transition metal from-decay" value="43">Tc</button>
            </td>
            <td>
              <button title="Ruthenium" class="atom-ru transition metal" value="44">Ru</button>
            </td>
            <td>
              <button title="Rhodium" class="atom-rh transition metal" value="45">Rh</button>
            </td>
            <td>
              <button title="Palladium" class="atom-pd transition metal" value="46">Pd</button>
            </td>
            <td>
              <button title="Silver" class="atom-ag transition metal" value="47">Ag</button>
            </td>
            <td>
              <button title="Cadmium" class="atom-cd transition metal" value="48">Cd</button>
            </td>
            <td>
              <button title="Indium" class="atom-in post-transition metal" value="49">In</button>
            </td>
            <td>
              <button title="Tin" class="atom-sn post-transition metal" value="50">Sn</button>
            </td>
            <td>
              <button title="Antimony" class="atom-sb metalloid" value="51">Sb</button>
            </td>
            <td>
              <button title="Tellurium" class="atom-te metalloid" value="52">Te</button>
            </td>
            <td>
              <button title="Iodine" class="atom-i diatomic" value="53">I</button>
            </td>
            <td>
              <button title="Xenon" class="atom-xe noble gas" value="54">Xe</button>
            </td>
          </tr>
          <tr>
            <th>6</th>
            <td>
              <button title="Caesium" class="atom-cs alkali metal" value="55">Cs</button>
            </td>
            <td>
              <button title="Barium" class="atom-ba alkaline-earth metal" value="56">Ba</button>
            </td>
            <td class="ref">*</td>
            <td>
              <button title="Hafnium" class="atom-hf transition metal" value="72">Hf</button>
            </td>
            <td>
              <button title="Tantalum" class="atom-ta transition metal" value="73">Ta</button>
            </td>
            <td>
              <button title="Tungsten" class="atom-w transition metal" value="74">W</button>
            </td>
            <td>
              <button title="Rhenium" class="atom-re transition metal" value="75">Re</button>
            </td>
            <td>
              <button title="Osmium" class="atom-os transition metal" value="76">Os</button>
            </td>
            <td>
              <button title="Iridium" class="atom-ir transition metal" value="77">Ir</button>
            </td>
            <td>
              <button title="Platinum" class="atom-pt transition metal" value="78">Pt</button>
            </td>
            <td>
              <button title="Gold" class="atom-au transition metal" value="79">Au</button>
            </td>
            <td>
              <button title="Mercury" class="atom-hg transition metal liquid" value="80">Hg</button>
            </td>
            <td>
              <button title="Thallium" class="atom-tl post-transition metal" value="81">Tl</button>
            </td>
            <td>
              <button title="Lead" class="atom-pb post-transition metal" value="82">Pb</button>
            </td>
            <td>
              <button title="Bismuth" class="atom-bi post-transition metal" value="83">Bi</button>
            </td>
            <td>
              <button title="Polonium" class="atom-po post-transition metal from-decay" value="84">Po</button>
            </td>
            <td>
              <button title="Astatine" class="atom-at metalloid from-decay" value="85">At</button>
            </td>
            <td>
              <button title="Radon" class="atom-rn noble gas from-decay" value="86">Rn</button>
            </td>
          </tr>
          <tr>
            <th>7</th>
            <td>
              <button title="Francium" class="atom-fr alkali metal from-decay" value="87">Fr</button>
            </td>
            <td>
              <button title="Radium" class="atom-ra alkaline-earth metal from-decay" value="88">Ra</button>
            </td>
            <td class="ref">**</td>
            <td>
              <button title="Rutherfordium" class="atom-rf transition metal synthetic unknown-phase" value="104">Rf</button>
            </td>
            <td>
              <button title="Dubnium" class="atom-db transition metal synthetic unknown-phase" value="105">Db</button>
            </td>
            <td>
              <button title="Seaborgium" class="atom-sg transition metal synthetic unknown-phase" value="106">Sg</button>
            </td>
            <td>
              <button title="Bohrium" class="atom-bh transition metal synthetic unknown-phase" value="107">Bh</button>
            </td>
            <td>
              <button title="Hassium" class="atom-hs transition metal synthetic unknown-phase" value="108">Hs</button>
            </td>
            <td>
              <button title="Meitnerium" class="atom-mt synthetic unknown-properties" value="109">Mt</button>
            </td>
            <td>
              <button title="Darmstadtium" class="atom-ds synthetic unknown-properties" value="110">Ds</button>
            </td>
            <td>
              <button title="Roentgenium" class="atom-rg synthetic unknown-properties" value="111">Rg</button>
            </td>
            <td>
              <button title="Copernicium" class="atom-cn transition metal synthetic unknown-phase" value="112">Cn</button>
            </td>
            <td>
              <button title="Ununtrium" class="atom-uut synthetic unknown-properties" value="113">Uut</button>
            </td>
            <td>
              <button title="Flerovium" class="atom-fl synthetic unknown-properties" value="114">Fl</button>
            </td>
            <td>
              <button title="Ununpentium" class="atom-uup synthetic unknown-properties" value="115">Uup</button>
            </td>
            <td>
              <button title="Livermorium" class="atom-lv synthetic unknown-properties" value="116">Lv</button>
            </td>
            <td>
              <button title="Ununseptium" class="atom-uus synthetic unknown-properties" value="117">Uus</button>
            </td>
            <td>
              <button title="Ununoctium" class="atom-uuo synthetic unknown-properties" value="118">Uuo</button>
            </td>
          </tr>
          <tr>
            <th colspan="3" class="ref">*</th>
            <td>
              <button title="Lanthanum" class="atom-la lanthanide" value="57">La</button>
            </td>
            <td>
              <button title="Cerium" class="atom-ce lanthanide" value="58">Ce</button>
            </td>
            <td>
              <button title="Praseodymium" class="atom-pr lanthanide" value="59">Pr</button>
            </td>
            <td>
              <button title="Neodymium" class="atom-nd lanthanide" value="60">Nd</button>
            </td>
            <td>
              <button title="Promethium" class="atom-pm lanthanide from-decay" value="61">Pm</button>
            </td>
            <td>
              <button title="Samarium" class="atom-sm lanthanide" value="62">Sm</button>
            </td>
            <td>
              <button title="Europium" class="atom-eu lanthanide" value="63">Eu</button>
            </td>
            <td>
              <button title="Gadolinium" class="atom-gd lanthanide" value="64">Gd</button>
            </td>
            <td>
              <button title="Terbium" class="atom-tb lanthanide" value="65">Tb</button>
            </td>
            <td>
              <button title="Dysprosium" class="atom-dy lanthanide" value="66">Dy</button>
            </td>
            <td>
              <button title="Holmium" class="atom-ho lanthanide" value="67">Ho</button>
            </td>
            <td>
              <button title="Erbium" class="atom-er lanthanide" value="68">Er</button>
            </td>
            <td>
              <button title="Thulium" class="atom-tm lanthanide" value="69">Tm</button>
            </td>
            <td>
              <button title="Ytterbium" class="atom-yb lanthanide" value="70">Yb</button>
            </td>
            <td>
              <button title="Lutetium" class="atom-lu lanthanide" value="71">Lu</button>
            </td>
            <td></td>
          </tr>
          <tr>
            <th colspan="3" class="ref">**</th>
            <td>
              <button title="Actinium" class="atom-ac actinide from-decay" value="89">Ac</button>
            </td>
            <td>
              <button title="Thorium" class="atom-th actinide" value="90">Th</button>
            </td>
            <td>
              <button title="Protactinium" class="atom-pa actinide from-decay" value="91">Pa</button>
            </td>
            <td>
              <button title="Uranium" class="atom-u actinide" value="92">U</button>
            </td>
            <td>
              <button title="Neptunium" class="atom-np actinide from-decay" value="93">Np</button>
            </td>
            <td>
              <button title="Plutonium" class="atom-pu actinide" value="94">Pu</button>
            </td>
            <td>
              <button title="Americium" class="atom-am actinide from-decay" value="95">Am</button>
            </td>
            <td>
              <button title="Curium" class="atom-cm actinide from-decay" value="96">Cm</button>
            </td>
            <td>
              <button title="Berkelium" class="atom-bk actinide from-decay" value="97">Bk</button>
            </td>
            <td>
              <button title="Californium" class="atom-cf actinide from-decay" value="98">Cf</button>
            </td>
            <td>
              <button title="Einsteinium" class="atom-es actinide synthetic" value="99">Es</button>
            </td>
            <td>
              <button title="Fermium" class="atom-fm actinide synthetic unknown-phase" value="100">Fm</button>
            </td>
            <td>
              <button title="Mendelevium" class="atom-md actinide synthetic unknown-phase" value="101">Md</button>
            </td>
            <td>
              <button title="Nobelium" class="atom-no actinide synthetic unknown-phase" value="102">No</button>
            </td>
            <td>
              <button title="Lawrencium" class="atom-lr actinide synthetic unknown-phase" value="103">Lr</button>
            </td>
            <td></td>
          </tr>
        </table>
        <fieldset>
          <label>
            <input type="radio" value="single" name="mode">Single
          </label>
          <label>
            <input type="radio" value="list" name="mode">List
          </label>
          <label>
            <input type="radio" value="not-list" name="mode">Not List
          </label>
        </fieldset>
        <footer>
          <input type="button" value="Cancel">
          <input type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="rgroup-table" style="display:none;">
        <header>R-Group</header>
        <ul>
          <li>
            <button>R1</button>
          </li>
          <li>
            <button>R2</button>
          </li>
          <li>
            <button>R3</button>
          </li>
          <li>
            <button>R4</button>
          </li>
          <li>
            <button>R5</button>
          </li>
          <li>
            <button>R6</button>
          </li>
          <li>
            <button>R7</button>
          </li>
          <li>
            <button>R8</button>
          </li>
          <li>
            <button>R9</button>
          </li>
          <li>
            <button>R10</button>
          </li>
          <li>
            <button>R11</button>
          </li>
          <li>
            <button>R12</button>
          </li>
          <li>
            <button>R13</button>
          </li>
          <li>
            <button>R14</button>
          </li>
          <li>
            <button>R15</button>
          </li>
          <li>
            <button>R16</button>
          </li>
          <li>
            <button>R17</button>
          </li>
          <li>
            <button>R18</button>
          </li>
          <li>
            <button>R19</button>
          </li>
          <li>
            <button>R20</button>
          </li>
          <li>
            <button>R21</button>
          </li>
          <li>
            <button>R22</button>
          </li>
          <li>
            <button>R23</button>
          </li>
          <li>
            <button>R24</button>
          </li>
          <li>
            <button>R25</button>
          </li>
          <li>
            <button>R26</button>
          </li>
          <li>
            <button>R27</button>
          </li>
          <li>
            <button>R28</button>
          </li>
          <li>
            <button>R29</button>
          </li>
          <li>
            <button>R30</button>
          </li>
          <li>
            <button>R31</button>
          </li>
          <li>
            <button>R32</button>
          </li>
        </ul>
        <footer>
          <input type="button" value="Cancel">
          <input type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="rlogic_table" style="display:none;">
        <header>R-Group Logic</header>
        <label for="rlogic_occurrence">Occurrence:
          <input id="rlogic_occurrence" type="text" maxlength="50">
        </label>
        <label for="rlogic_resth">RestH:
          <select id="rlogic_resth">
            <option value="0">Off</option>
            <option value="1">On</option>
          </select>
        </label>
        <label for="rlogic_if">Condition:
          <select id="rlogic_if">
            <option value="0">Always</option>
          </select>
        </label>
        <footer>
          <input id="rlogic_cancel" type="button" value="Cancel">
          <input id="rlogic_ok" type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="save-file" style="display:none;">
        <header>Save Structure</header>
        <label>Format:
          <select>Format:
            <option value="mol">MDL/Symyx Molfile</option>
            <option value="smi">Daylight SMILES</option>
            <option value="inchi">InChI String</option>
          </select>
        </label>
        <textarea readonly></textarea>
        <footer>
          <a class="save" download>Save To File…</a>
          <input type="button" value="Close">
        </footer>
      </form>
      <form role="dialog" id="sgroup_properties" style="display:none;">
        <header>S-Group Properties</header>
        <label>Type:
          <select id="sgroup_type">
            <option value="GEN">Generic</option>
            <option value="MUL">Multiple group</option>
            <option value="SRU">SRU polymer</option>
            <option value="SUP">Superatom</option>
            <option value="DAT">Data</option>
          </select>
        </label>
        <fieldset class="base">
          <label>Connection:
            <select id="sgroup_connection">
              <option value="ht">Head-to-tail</option>
              <option value="hh">Head-to-head</option>
              <option value="eu">Either unknown</option>
            </select>
          </label>
          <label>Label (subscript):
            <input id="sgroup_label" type="text" maxlength="15">
          </label>
        </fieldset>
        <fieldset class="data">
          <label>Field name:
            <input id="sgroup_field_name" type="text" maxlength="30">
          </label>
          <label>Field value:
            <textarea id="sgroup_field_value"></textarea>
          </label>
          <label class="pos">
            <input type="radio" id="sgroup_pos_absolute" name="data_field_pos" checked>Absolute
          </label>
          <label class="pos">
            <input type="radio" id="sgroup_pos_relative" name="data_field_pos">Relative
          </label>
          <label class="pos">
            <input type="radio" id="sgroup_pos_attached" name="data_field_pos">Attached
          </label>
        </fieldset>
        <footer>
          <input type="button" value="Cancel">
          <input type="button" value="OK">
        </footer>
      </form>
      <form role="dialog" id="custom_templates" style="display:none">
        <header>Custom templates</header>
        <ul></ul>
        <footer>
          <input type="button" value="Cancel">
          <input type="button" value="OK">
        </footer>
      </form>
    </div>
    <div id="toolText" style="display: none;"></div>
    <input id="input_label" type="text" maxlength="4" size="4" style="display:none;">
  </main>
<script src="scripts/js/ketcher/ketcher_init.js"></script>

!set oef_applet_option=$Inputsize\
$oef_applet_option
