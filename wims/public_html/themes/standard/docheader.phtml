
!! document menu
!nocache
!set wims_theme_docheader=yes
<!-- begin of docheader.phtml -->
!if $wims_class=$empty or adm/doc notin $module
  !set oneitem=oneitem.phtml
!else
  !set oneitem=./adm/oneitem.phtml
!endif

!!!if $wims_developer= and $wims_user!=supervisor
!if $job iswordof read print
 <div id="wimsdoc">
!endif
!!!endif
!if $wims_lightpopup=yes 
  !goto end1
!endif
<div id="wimstopbox" style="background-color:$wims_ref_bgcolor;">
<div class="wimsmenu">
!if _mfeed  isin $wims_session
<span class="menuitem">
  !set wims_ref_class=doch_class
   <a href="#" onclick="window.close()">$wims_name_back2</a>
  </span><!-- menuitem-->
!endif
!if help notin $wims_session and _mfeed notin $wims_session
 !if $wims_class=$empty
  <span class="menuitem">
  !read $oneitem doch_wims,1,module=home
  </span><!-- menuitem-->
 !else
  !if _doc isin $wims_session
  <span class="menuitem">
  !set wims_ref_class=doch_class
   <a href="#" onclick="window.close()">$wims_name_doch_class</a>
  </span><!-- menuitem-->
  !else 
  <span class="menuitem">
   !read $oneitem doch_class,1,module=home
  </span><!-- menuitem-->
  !endif
  !if $m_wims_sequence>0
    <span class="menuitem">
    !if $wims_user=supervisor
     !href module=adm/class/sequence&seq=$m_wims_sequence $name
    !else
     !href module=home&seq=$m_wims_sequence $name
    !endif
    </span><!-- menuitem-->
  !else
   !if $wims_sequence>0
    !set ti=!defof sequence_Title in wimshome/log/classes/$wims_class/seq/.def
    <span class="menuitem">
     !if $wims_user=supervisor
       !href module=adm/class/sequence&seq=$wims_sequence $name
     !else
       !read $oneitem sequence,1,module=home&seq=$wims_sequence
     !endif
    </span><!-- menuitem-->
   !endif
  !endif
 !endif
!endif
 !if ..//adm/doc isin ..//$module and \
    ($wims_class=$empty or $wims_user=supervisor) and _test notin $wims_session
  <span class="menuitem">
  !read $oneitem doch_docs,1,module=$module&cmd=reply&job=home
  </span><!-- menuitem-->
 !endif
!endif
!default upbl=main
!if $block!=main and $job=read
  <span class="menuitem">
 !read $oneitem doch_up,1,cmd=reply&doc=$doc&block=$upbl
  </span><!-- menuitem-->
 !if $prev!=$empty and $prev!=$upbl
  <span class="menuitem">
  !read $oneitem doch_prev,1,cmd=reply&doc=$doc&block=$prev
  </span><!-- menuitem-->
 !endif
 !if $next!=$empty and $next!=$upbl
  <span class="menuitem">
  !read $oneitem doch_next,1,cmd=reply&doc=$doc&block=$next
  </span><!-- menuitem-->
 !endif
!endif

!if $job=read
  !set wims_name_nexthist=&gt;&gt;
  !set wims_name_backhist=&lt;&lt;
 !if $blocklast$blocknext!=$empty
  <span class="menuitem">
  [
  !if $blocklast!=$empty
  !read $oneitem backhist,1,cmd=reply&doc=$doclast&block=$blocklast&readcntadv=-1 
  !endif
   &nbsp;$wims_name_doch_hist
  !if $blocknext!=$empty
   &nbsp;
    !read $oneitem nexthist,1,cmd=reply&doc=$docnext&block=$blocknext&readcntadv=1
  !endif
  ]
  </span><!-- menuitem-->
 !endif
  <span class="menuitem">
 !read $oneitem doch_reload,1,cmd=reply&job=read
  </span><!-- menuitem-->
!endif
!if $printable=yes
  <span class="menuitem">
 !read $oneitem doch_interactive,1,cmd=reply&job=read&doc=$doc&block=$startblock
  </span><!-- menuitem-->
!else
 !if $job=read
  <span class="menuitem">
  !read $oneitem doch_printable,1,cmd=reply&job=print&doc=$doc
  </span><!-- menuitem-->
 !endif
 !if $job=exosource
  <span class="menuitem">
  !read $oneitem doch_back,1,cmd=reply&job=read
  !reset wims_ref_class
  </span><!-- menuitem-->
 !endif
 !if $doc!=$helpd and $editable=yes
  <span class="menuitem">
 !!!ne pas utiliser oneitem, ne fonctionne pas
  !set wims_ref_class=doch_help
  !href target=wims_help module=$module&cmd=new&job=read&doc=$helpd $wims_name_doch_help
  !reset wims_ref_class
  </span><!-- menuitem-->
 !endif
 !if _mfeed notin $wims_session
  <span class="menuitem">
  !!!ne pas utiliser oneitem
  !set wims_ref_class=doch_about
  !href target=wims_mhelp module=$module&cmd=help&special_parm=about $wims_name_doch_about
  !reset wims_ref_class
  </span><!-- menuitem-->
 !endif
!endif
</div><!--end of wimsmenu  -->
</div><!--end of wimstopbox  -->
:end1
!if $wims_lightpopup=yes
  <div id="wimslightpopup">
   <div id="wimsbodybox">
   <div id="wimspagebox">
  !exit
!endif
 <div id="wimsbodybox">
 <div id="wimspagebox">
 !if $job=read
 <div class="wimsdocleftmenu"> 
!if $blocklast!=$empty
  <div class="menuitem">
   !read $oneitem backhist,6,cmd=reply&doc=$doclast&block=$blocklast&readcntadv=-1 
  </div>
  !endif
  !if $blocknext!=$empty
  <div class="menuitem">
  !read $oneitem nexthist,6,cmd=reply&doc=$docnext&block=$blocknext&readcntadv=1
  </div>
  !endif
 !if $block!=main and $job=read
  <div class="menuitem">
 !read $oneitem doch_up,6,cmd=reply&doc=$doc&block=$upbl
 </div>
 !endif
 !if $prev!=$empty and $prev!=$upbl and $job=read
  <div class="menuitem">
  !read $oneitem doch_prev,6,cmd=reply&doc=$doc&block=$prev
  </div><!-- menuitem-->
  !endif
  !if $next!=$empty and $next!=$upbl and $job=read
   <div class="menuitem">
  !read $oneitem doch_next,6,cmd=reply&doc=$doc&block=$next
  </div><!-- menuitem-->
 !endif
 </div><!-- wimsdocleftmenu-->
 <div class="wimsdocrightmenu">
 !if $block!=main and $job=read
  !if $blocklast!=$empty
  <div class="menuitem">
   !read $oneitem backhist,6,cmd=reply&doc=$doclast&block=$blocklast&readcntadv=-1 
  </div>
  !endif
  !if $blocknext!=$empty
  <div class="menuitem">
  !read $oneitem nexthist,6,cmd=reply&doc=$docnext&block=$blocknext&readcntadv=1
  </div>
  !endif
  <div class="menuitem">
 !read $oneitem doch_up,6,cmd=reply&doc=$doc&block=$upbl
 </div>
 !endif
  !if $prev!=$empty and $prev!=$upbl
  <div class="menuitem">
  !read $oneitem doch_prev,6,cmd=reply&doc=$doc&block=$prev
   </div><!-- menuitem-->
  !endif
  !if $next!=$empty and $next!=$upbl
   <div class="menuitem">
  !read $oneitem doch_next,6,cmd=reply&doc=$doc&block=$next
   </div><!-- menuitem-->
  !endif
  </div><!-- wimsdocrightmenu-->
  !endif 
<!-- end of docheader.phtml -->
