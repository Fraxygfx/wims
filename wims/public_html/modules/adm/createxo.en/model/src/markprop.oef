type=datalist
textarea="data explain"

:Mark objects according to their properties.

The exercise presents a list of objects, and you should mark those having a
certain property according to the requirement of the exercise.
<p>
To construct an exercise with this model, it is enough to enter the list of
objects and their properties.
<p>
With a slight modification, a variant of this model can accept image objects.
<p>
Author of the model: Gang Xiao <xiao@unice.fr>

:%%%%%%%%%%%%%%%%%      ATTENTION      %%%%%%%%%%%%%%%%%%%%

Remove the above header if you destroy the model tags! (The lines starting
with a ':'.) Otherwise the exercise might not be taken back by Createxo.

:%%%%%%%% Example parameters to be redefined %%%%%%%%%%%%%%%%%

:\title{Mark by property}
:\author{XIAO Gang}
:\email{xiao@unice.fr}

:Number of objects to mark per exercise. Up to 100.
You must define enough objects within the main data!
\integer{tot=12}

:The minimal number of good objects that should be marked. At least 1.
\integer{mingood=1}

:The minimal number of bad objects that should NOT be marked. At least 1.
\integer{minbad=4}

:List of properties. The property to mark will be randomly drawn.
\text{prop=French,Italian,German}

:Main data.
Define one object per line, first the name, then the property,
separated by a comma. <p>
It is best to define data in abundant quantity for each category. <p>
Take care not to introduce typos in the properties! Otherwise the 
corresponding object may break the exercise.
\matrix{data=
Fabien Barthez,French
Grégory Coupet,French
Eric Abidal,French
William Gallas,French
Willy Sagnol,French
Lilian Thuram,French
Pascal Chimbonda,French
Mickaël Silvestre,French
Claude Makélélé,French
Patrick Vieira,French
Florent Malouda,French
Zinedine Zidane,French
Sylvain Wiltord,French
Franck Ribéry,French
Vikash Dhorasoo,French
Sidney Govou,French
Thierry Henry,French
David Trézéguet,French
Louis Saha,French

Gianluigi Buffon,Italian
Morgan De Sanctis,Italian
Angelo Peruzzi,Italian
Christian Abbiati,Italian
Marco Amelia,Italian
Flavio Roma,Italian
Gianluca Zambrotta,Italian
Alessandro Nesta,Italian
Fabio Cannavaro,Italian
Fabio Grosso,Italian
Cristian Zaccardo,Italian
Marco Materazzi,Italian
Andrea Barzagli,Italian
Massimo Oddo,Italian
Mauro Camoranesi,Italian
Andrea Pirlo,Italian
Gennaro Gattuso,Italian
Francesco Totti,Italian
Daniele de Rossi,Italian
Aimo Diana,Italian
Simone Barone,Italian
Manuele Blasi,Italian
Simone Perrotta,Italian
Alberto Gilardino,Italian
Luca Toni,Italian
Alessandro Del Piero,Italian
Vicenzo Iaquinta,Italian
Christian Vieri,Italian
Antonio Cassano,Italian
Cristiano Lucarelli,Italian
Filippo Inzaghi,Italian

Jens Lehmann,German
Oliver Kahn,German
Timo Hildebrand,German
Philipp Lahm,German
Arne Friedrich,German
Robert Huth,German
Jens Nowotny,German
Per Mertesacker,German
Christoph Metzelder,German
Marcell Jansen,German
Bernd Schneider,German
Sebastian Kehl,German
Torsten Frings,German
Michael Ballack,German
Tim Borowski,German
Bastian Schweinsteiger,German
David Odonkor,German
Thomas Hitzlsperger,German
Miroslav Klose,German
Lukas Podolski,German
Gerald Asamoah,German
Mike Hanke,German
Oliver Neuville,German
}

:Option words.
Add the word "split" to the definition if you allow a partial score for a
partially correct answer.
\text{option=split}

:%%%%%%%%%%%%%% Nothing to modify before the statement %%%%%%%%%%%%%%%%

\text{prop=randitem(\prop)}

\text{data=wims(nonempty rows \data)}
\text{good=wims(select \data where column 2 issametext \prop)}
\text{bad=wims(select \data where column 2 notsametext \prop)}
\text{good=shuffle(wims(nonempty item \good[;1]))}
\text{bad=shuffle(wims(nonempty item \bad[;1]))}
\integer{goodcnt=items(\good)}
\integer{badcnt=items(\bad)}
\integer{tot=min(\tot,\goodcnt+\badcnt)}
\integer{mingood=min(\mingood,\tot-1)}
\integer{minbad=min(\minbad,\tot-\mingood-1)}
\integer{pickgood=randint(min(\mingood,\goodcnt)..min(\tot-\minbad,\goodcnt))}
\integer{pickbad=min(\tot-\pickgood,\badcnt)}
\integer{tot=\pickgood+\pickbad}
\text{ind=wims(makelist 1 for x=1 to \pickgood),wims(makelist 0 for x=1 to \pickbad)}
\text{all=item(1..\pickgood,\good),item(1..\pickbad,\bad)}
\text{list=wims(values x for x=1 to \tot)}
\text{sh=shuffle(\list)}
\text{all=item(\sh,\all)}
\text{ind=item(\sh,\ind)}
\text{tomark=positionof(1,\ind)}

:%%%%%%%%%%%%% Now the statement in html. %%%%%%%%%%%%%%%%%%%%

:Text to explain what should be done.
Write <tt>\prop</tt> for the randomly drawn property.
$embraced_randitem
\text{explain=
Among the players below having participated to the World Football Cup 2006,
please mark those in the \prop team.
}

:%% Computations; do not modify
\text{explain=wims(embraced randitem \explain)}

::You don't need to modify this in general.

\statement{\explain
<p>
\for{k=1 to \tot-1}{\embed{r1,\k},}
\embed{r1,\tot}.
<p>
}

:%%%%%%%%%%%%% Nothing to modify after. %%%%%%%%%%%%%%%%%5

\answer{The marking}{\tomark;\all}{type=mark}{option=\option}

