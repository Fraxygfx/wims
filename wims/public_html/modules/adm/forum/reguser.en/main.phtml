!!<html><head>
!!$wims_html_header
!!</head><body $wims_htmlbody>
!!!headmenu

!header1

!!if $cmd=help
 !!read help.phtml
 !!goto end
!!endif

!read names.phtml
<center><h1>WIMS at $httpd_HTTP_HOST
<p>
Message board user registration
</h1></center> <p><hr width="50%"> <p>

!if $error!=$empty
 <p>
 !read msg.phtml
 <p>
 !goto end1
!endif

!if $forumcnt=0
 This site contains no message board for the time being. Sorry, try again later!
 !goto end
!endif

!set forumname=<b><font color=green>$title</font></b>

!if $password!=$empty and $passverify=$empty and $mailverif=$empty
 $forumname
 is protected by a password. You have to type this
 password before you can register into it.
 !form reply
 <input type=hidden name=step value=1>
 <center> <p>Password:
 <input type=password name=forumpass>
 <p>
 <input type=submit value="Send this password">
 </center></form> <p>
 <b>Remark</b>. If the owner ($supervisor) of this message board allows you
 the access, you should be able to obtain the password from him/her.
 (
 !mailurl $smail Write to the owner
 )
 !goto end1
!endif

!if $step=$empty or $step<2
 In order to register to $forumname,
 please fill-in the following informations.
 <ul>
 !form reply
 <input type=hidden name=step value=2>
 <li>Your family name <input size=20 name=lastn value="$lastn">
  and first name <input size=20 name=firstn value="$firstn">
  <p>
 <li>Choose a login name:
  <input size=16 name=login value="$login"> <br>
  This will be the name which you will use to log into the message board later.
  Please choose a word containing between 4 and 16 characters
  (digits or letters without accent).
  <p>
 <li>And a password:
  <input type=password size=16 name=pass> <br>
  the password must contain between 4 and 16 characters (digits or letters
  without accent).
  <p>
 !if $mailverif=$empty
  <li>Your email address (optional):<br>
 !else
  <li>Your email address:<br>
 !endif
  <input size=60 name=email value="$email">
  <p>
 <center><input type=submit value="Register"></center>
 </form></ul>
 !goto end1
!endif

!if $step=2
 Hello, $firstn $lastn!<p>
 You are registering yourself as a participant to 
 $forumname,
 with the login name &nbsp;
 ``<tt><b><font color=green>$login</font></b></tt>''. <p>
 !if $email=$empty
  You didn't give a valid email address. <p>
 !else
  Your email address: <tt>$email</tt> <p>
 !endif
 In order to verify the exactness of your password, please retype it again:
 !form reply
 <input type=hidden name=step value=3>
 <p><center><input type=password size=16 name=pass2>
 <p><input type=submit value="Send the password"></center>
 </form> <p>
 !goto end1
!endif

!if $step=3
 Hello, $firstn $lastn!<p>
 !if $mailverif=yes
  !set mailverif=next
  $forumname does not allow anonymous registration. It uses your email address
  to keep your identity (in order to prevent abuses).
  <p>
  In order to verify the effectiveness of your email address, the server is
  sending a secret code to you via email. Please read this mail, and copy this
  code here:
  !form reply
  <input type=hidden name=step value=3>
  <p><center><input size=10 name=vericode>
  <input type=submit value=OK></form>
  <p>
  !href module=adm/forum/forum Abandon the operation
  </center> <p>
  !goto end1
 !else
  Welcome to $forumname.
  You are now a participant of this message board, with the login name
  ``<b><font color=green>$login</font></b>''. <p>
  You may now
  !href module=adm/forum/forum&forum=$forum&type=authuser login
  to the message board.
  !goto end
 !endif
!endif

:end1
<p>
!href module=adm/forum/forum&type=list List of message boards
:end
!tail

!set step=

