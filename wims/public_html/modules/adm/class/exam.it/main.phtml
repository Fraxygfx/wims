!set wims_name_examremain=Tempo rimanente per completare il tema d'esame: $
!read js/examclock1.phtml
!read adm/css.phtml
!header1

!read names.phtml

!if $job iswordof student score scorereg
 !changeto $job.phtml
!endif

!read adm/title.phtml 1\
$wims_classname - $wims_institutionname\
$title $exam

!if $error!=$empty
 <p>
 !read msg.phtml
 <p>
 !href module=home $wims_name_back
. <p>
 !goto end
!endif

!if $job=exo or $job=cpsheet
 !read $job.phtml
 !goto end
!endif

!if $activetest>0
 !form reply
 <input type=hidden name=job value=text>
 Questo tema d'esame &egrave; 
 !if $activetest=1
  attivo (quindi non modificabile).
  !href cmd=reply&job=expire $name_expire
.
 !else
  !if $activetest=2
   terminato, ma ancora visibile per gli studenti.
   !href cmd=reply&job=hide Nascondilo agli studenti
  !else
   terminato e non visibile dagli studenti.
   !href cmd=reply&job=expire Riproponilo agli studenti
  !endif
.
  !href cmd=reply&job=reactivate Riattivalo
.
 !endif
 !href cmd=reply&job=deactivate Disattivalo
 <center><table border=2>
 <tr><td align=right>$wims_name_title:
 <td><input size=40 name=title value="$title">
 <td rowspan=3><input type=submit value="$wims_name_change">
 <tr><td align=right>$wims_name_Description:
 <td><textarea name=desc rows=2 cols=40>$desc</textarea>
 <tr><td align=right>Data di termine:<td>
 !distribute item $[$expday],$[$expmon] into expday,expmon
 !formselect expday from 1 to 31
 !formselect expmon from 1 to 12 prompt $months
 !formselect expyear from $thisyear to $thisyear+1
 </table></center></form> <p>
 !goto end1
!endif

!form reply
<input type=hidden name=job value=text>
$wims_name_title (massimo $title_limit caratteri):<br>
<input size=65 name=title value="$title"> <p>
E una introduzione (massimo $desc_limit caratteri; sono ammessi
tag html e link) :<br>
<textarea rows=6 cols=65 name=desc>$desc</textarea>

<center><input type=submit value="Salva"></center>

<p>Questo esame terminerà
!distribute item $[$expday],$[$expmon] into expday,expmon
!formselect expday from 1 to 31
!formselect expmon from 1 to 12 prompt $months
!formselect expyear from $thisyear to $thisyear+1
. Una sessione d'esame dura al pi&ugrave;
<input size=5 name=duration value="$duration">
minuti. Ogni studente pu&ograve; ripetere l'esame al più 
!default stries=3
<input size=3 name=tries value="$stries"> volte.
<input type=submit value="$wims_name_tosave">

!ifval $activetest=-1
 <p>Questo tema d'esame non esiste ancora. 
 <input type=submit value="Crearlo"> (occorre avere inserito almeno
 il titolo).
 </form>
 !goto end
!else
 </form>
 !if $exocnt>0
  <p>Questo tema d'esame non &egrave; ancora attivo.
  !href cmd=reply&job=prep_activate Cliccare qui
  per attivarlo.
  (Gli studenti possono vedere solo i temi d'esame attivati; una volta
  che il tema d'esame viene attivato non &egrave; pi&ugrave; modificabile.)
 !endif
!endif

:end1
<p>
!if $exocnt=0
 Questo tema d'esame non contine ancora nulla.
 !href cmd=reply&job=exo&exo=1 Inserisci un esercizio
, o
 !href cmd=reply&job=cpsheet inserisci un gruppo di esercizi
.
!else
 <a name=list>
 Contenuti:</a><ol>
 !for i=1 to $exocnt
  <li>
  !set ex=!record $i of wimshome/log/classes/$wims_class/exams/.exam$exam
  !distribute lines $ex into we,ch,ti
  $ti, peso $we.
  !if $activetest=0
   &nbsp;(
   !if $i>1
    !href cmd=reply&job=moveup&moveup=$i#list $wims_name_up
    &nbsp;
   !endif
   !href cmd=reply&job=exo&exo=$i $wims_name_change
   &nbsp;
   !href cmd=reply&job=delete&delete=$i#list $wims_name_erase
   )
  !endif
 !next i
 </ol>
 !if $activetest=0
  !href cmd=reply&job=exo&exo=$[$exocnt+1] Inserisci un altro esercizio
, 
$wims_name_or
 !href cmd=reply&job=cpsheet inserisci un gruppo di esercizi
.
 !endif
!endif

<p>
!if $activetest=0 and $erasable=yes
  &Egrave; possibile
  !href cmd=reply&job=prep_erase cancellare il tema d'esame
.
!endif

!if $activetest>=0
 !href cmd=reply&job=student Pagina pubblica del tema d'esame
 <p>
 !form reply
 <input type=hidden name=allow value=yes>
 La registrazione dei voti &egrave;
 !formselect allowtype list all, simulation, none, select prompt\
       attiva per tutti, a disposizione per prova,\
       disattivata, limitata ai seguenti IP (e/o orari):
 <br><input size=50 name=IPlist value="$IPlist"> <br>
 Termine sessioni (cut times):
 <input size=50 name=cutt value="$cutt"> <br>
 <input type=submit value="$wims_name_tosave">
 !set allowshare=0
 !if $sharers!=$empty
  (per tutti i corsi coordinati:
  !formselect allowshare list 0,1 prompt $wims_name_no,$wims_name_yes
  )
 !else
  <input type=hidden name=allowshare value=0>
 !endif
 </form>
 <small><b>Suggerimento.</b> &Egrave; possibile dare un accesso limitato 
 per la registrazione dei voti aggiungendo le date nelle forme:
 <font color=blue><b>
 <tt>&gt;aaaammgg.hh:mm</tt></b></font>
 (inizio) e/o
 <font color=blue><b>
 <tt>&lt;aaaammgg.hh:mm</tt></b></font>
 (termine). Queste date devono essere espresse nel fuso orario del 
 SERVER, e devono essere separate l'una dall'altra da spazi.
 <br>
 Inserendo dei <em>termini sessione</em> è possibile suddividere gli esami
 in diverse sessioni. Uno studente che ha svolto un tema d'esame prima di
 un termine sessione non potrà accedere al tema d'esame dopo tale termine.
 <br>
 Formato dei termini sessione: <tt>aaaammgg.hh:mm</tt> (è possibile inserire
 più termini sessione separati da spazi).
 </small>
!endif
:end
!tail

!reset job,echoose,eweight,ename,edep,eopt,source
