!read adm/css.phtml
!read tabletheme
!header1

!!if $cmd=help
 !!read help.phtml
 !!goto end
!!endif


!read adm/title.phtml 3\
WIMS $httpd_HTTP_HOST\
$title

!if $toomany=yes
 !read lang/toomany.phtml.$modu_lang
 !goto end
!endif

!if $error!=$empty
 <p>
 !read lang/msg.phtml.$modu_lang
 !if $restart!=no
  <p>
  !href module=$module&cmd=reply&step=0 $name_again
 !endif
 <p>
 !goto end
!endif

!if $step=$empty or $step=pre
 $name_choose
 <p>
 !href cmd=reply&step=0&cltype=0 $wims_name_create_class
 !set wims_menu_items=!append line create_class,1,cmd=reply&step=0&cltype=0\
 to $wims_menu_items
 <p>
 !if 2 isitemof $alltypes
  !href cmd=reply&step=0&cltype=2 $wims_name_create_superclass
  !set wims_menu_items=!append line create_superclass,1,cmd=reply&step=0&cltype=2\
 to $wims_menu_items
 !else
  <font color="blue"><strike>$wims_name_create_superclass</strike></font> ($noright).
 !endif
 <p>
 !if 4 isitemof $alltypes
  !href cmd=reply&step=0&cltype=4 $wims_name_create_portal
  ($name_expert)
  !set wims_menu_items=!append line create_portal,1,cmd=reply&step=0&cltype=4\
 to $wims_menu_items
 !else
  <font color="blue"><strike>$wims_name_create_portal</strike></font> ($noright).
 !endif
 <p>
 <b>$wims_name_help</b>:
 !read lang/help.phtml.$modu_lang 1
 !goto end
!endif

!if $step=0
 !read lang/help.phtml.$modu_lang 2
 !form reply
 <input type="hidden" name="step" value=1>
 $table_header
 $table_tr<td><label for="institution">$name_Name_portal</label></td><td>
 !if $Cltype isin 13
  !default institution=$wims_institutionname
 !endif
  <input size="$instlim" name="institution" value="$institution" id="institution"> ($name_atmost $instlim $name_characters)
 </td></tr>
 $table_tr<td><label for="description">$wims_name_name $name_classesss</label></td><td>
  <input size="$desclim" name="description" value="$description" id="description">($name_atmost $desclim $name_characters)
 </td></tr>
 
 !if $Cltype notin 24
 $table_tr<td><label for="level">$wims_name_level $name_classesss</label></td><td>
  <select name="level" id="level">
   !for k=1 to $nblevel
    !if $(levelid[$k])=$level
     <option selected value=$(levelid[$k])>$(leveldesc[$k])</option>
    !else
     <option value=$(levelid[$k])>$(leveldesc[$k])</option>    
    !endif
   !next k
  </select>
 </td></tr>
 !endif
!set suplim2 =$[rint(2*$suplim/3)]
 $table_tr<td>$wims_name_Supervisor</td><td>
 <label for="firstname">$wims_name_firstname</label>
 <input size="$suplim2" name="firstname" value="$firstname" id="firstname">
  <label for="lastname">$wims_name_lastname</label>
  <input size="$suplim2" name="lastname" value="$lastname" id="lastname">
 </td></tr>

 $table_tr<td><label for="email">$wims_name_email</label></td><td>
  <input size="$emaillim" name="email" value="$email" id="email">
  !if $regpolicy=email
   <br>($name_regpolicy)
  !endif
  <br>
 </td></tr>
 $table_tr<td><label for="passsup">$wims_name_Password ($name_sup)</label></td><td>
  <input size="16" type="password" name="passsup" id="passsup"> <small>
  ($name_warningpass).
  $name_help1</small>
 </td></tr>

 $table_tr<td><label for="password">$wims_name_Password ($name_classesss)</label></td><td>
  <input size="16" type="password" name="password" id="password">
  <small>($name_warningpass).
  !if $Cltype<2
  $name_help2
  !else
  $name_help3
 !endif
 </small>
 </td></tr>
 
 $table_tr<td><label for="exp_day">$wims_name_expiration</label></td><td>
 <select name="exp_day" id="exp_day">
  !for i=1 to 31
   <option value="$i"
   !ifval $i=$exp_day
    selected
   !endif
   >$i
  !next i
  </select> <select name="exp_month" id="exp_month">
  !for i=1 to 12
   <option value="$i"
   !ifval $i=$exp_month
    selected
   !endif
   >
   !item $i of $months
  !next i
  </select> <select name="exp_year" id="exp_year">
  !for i=$thisyear to $thisyear+1
   <option value="$i"
   !ifval $i=$exp_year
    selected
   !endif
   >$i
  !next i
  </select> <small>$name_help_date</small>
 </td></tr>

 $table_tr<td><label for="limit">$name_help_limit</label></td><td>
  <input size="3" name="limit" value="$limit" id="limit">
  <small>(< $wims_class_user_limit.) </small>
 </td></tr>
 
 $table_tr<td><label for="secure">$name_secure ($name_sup)</label></td><td>
  !default secure=all
  <input size="30" name="secure" value="$secure" id="secure">
  !reset secure
  <small>$name_host
  !if $Cltype<3
   $name_optional.
  !endif 
  </small>
 </td></tr>
$table_tr<td colspan="2" align="center">
 <input type="submit" value="$name_continue">
 </td></tr>
 $table_end
 </form>

 !goto end
!endif

!if $step=1
!read lang/help.phtml.$modu_lang step1
<p>
 !form reply
 <input type="hidden" name="step" value="2">
<label for="passsup"> $wims_name_Password ($name_sup)</label> 
 <input type="password" name="passsup" id="passsup"> <p>
 !if $pword!=$empty
 <label for="password">$wims_name_Password ($name_classesss)</label>
  <input type="password" name="password" id="password"> <p>
 !endif
 <center><input type="submit" value="$name_continue"></center>
 </form>
 !goto end1
!endif

!if $step=2
 !read lang/help.phtml.$modu_lang step2
 !form reply
 <input type="hidden" name="step" value="3">
 <center><label for="typecode">$name_code</label> <input size="12" name="typecode" id="typecode">
 <p><input type="submit" value="$name_continue"></center>
 </form>
 <b>$wims_name_warning</b>: $name_warning_code
 <p>
 !goto end1
!endif

!if $step=3
!read lang/help.phtml.$modu_lang step3
 !if $Cltype iswordof 0 1
  !let tmp=!positionof item $ilevel in $levelid
  ($wims_name_level <font color="green">$(leveldesc[$tmp])</font>).
 !endif
 <p>
 !read lang/links.phtml.$modu_lang
 !goto end
!endif

:end1

:end
!if $step>=0 and $cmd=reply
 !set wims_menu_items=!append line back2,1,module=$module\
 to $wims_menu_items
!endif

!tail

!set step=

